import{L as P,r as x,o as a,c as n,d as e,e as w,w as b,f as p,b as f,F as y,k as F,n as S,a as k,t as d,H as V,C as O,h as u,v as B,g as I,i as v,l as L,j as M}from"./app-c555380b.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";import{F as N,a as i}from"./pt-br-f13e6610.js";import{f as E,a as D}from"./funcoes-31773fa7.js";const U={name:"Pagination",components:{Link:P},props:{data:Object},computed:{cleanLinks(){const t=[...this.data.links];return t.shift(),t.pop(),t}}},q={"aria-label":"Page navigation"},A={class:"pagination"},T={class:"page-item active"},z={class:"page-item active"};function H(t,o,c,_,r,l){const h=x("Link");return a(),n("nav",q,[e("ul",A,[e("li",T,[c.data.prev_page_url?(a(),w(h,{key:0,href:c.data.prev_page_url,class:"page-link","preserve-state":"","preserve-scroll":""},{default:b(()=>[p(" Voltar ")]),_:1},8,["href"])):f("",!0)]),(a(!0),n(y,null,F(l.cleanLinks,m=>(a(),n("li",{class:S(["page-item",{active:m.active}]),key:m.label},[k(h,{href:m.url,class:"page-link","preserve-state":"","preserve-scroll":""},{default:b(()=>[p(d(m.label),1)]),_:2},1032,["href"])],2))),128)),e("li",z,[c.data.next_page_url?(a(),w(h,{key:0,href:c.data.next_page_url,class:"page-link","preserve-state":"","preserve-scroll":""},{default:b(()=>[p("Próximo")]),_:1},8,["href"])):f("",!0)])])])}const R=C(U,[["render",H]]),G={name:"Convenio/Index",components:{Pagination:R,FlashMessage:N,Head:V,Link:P,vSelect:O},props:{convenios:Object,filtro:Object,errors:Object,flash:Object,auth:Object},data(){return{alertas:i,contratos:[],orgaos:[],enviandoForm:!1,form:{numero:"",objeto:"",numero_processo:"",valor_repasse:"",valor_contra_partida:"",valor_total:"",valor_liberado_concedente:"",valor_pago:"",valor_liberado:"",virgencia:"",virgencia_prestacao_contas:"",contrato_id:"",orgao_id:""},formFiltro:{numero:"",virgencia:"",virgenciaPrestacaoContas:"",contratoId:"",orgaoId:""}}},created(){},computed:{ocultarPaginacao(){return!this.convenios.prev_page_url&&!this.convenios.next_page_url},temFiltro(){return Object.values(this.formFiltro).some(t=>t!==""&&t!==null)}},mounted(){this.$nextTick(()=>{try{axios.get(route("contratos.lista")).then(t=>this.contratos=t.data)}catch(t){i.toastr("Ops! tem algo de errado",t,"error"),console.log(t)}try{axios.get(route("orgaos.lista")).then(t=>this.orgaos=t.data)}catch(t){i.toastr("Ops! tem algo de errado",t,"error"),console.log(t)}})},methods:{formatarDataPtBr:E,formatarMoedaPtBr:D,buscar(){this.enviandoForm=!0,i.loading("pesquisando...");const t={};for(const o in this.formFiltro)this.formFiltro[o]!==""&&this.formFiltro[o]!==null&&(t[o]=this.formFiltro[o]);this.$inertia.visit(route("convenios.index"),{method:"get",data:t,preserveScroll:!0,preserveState:!0,onSuccess:()=>{i.close(),this.enviandoForm=!1},onError:o=>{for(let[c,_]of Object.entries(o))i.toastr(_,c,"error")},onFinish:()=>{i.close(),this.enviandoForm=!1}})},salvar(){this.form.put(route("user-password.update"),{errorBag:"updatePassword",preserveScroll:!0,onSuccess:()=>this.form.reset(),onError:()=>{}})},async deletar(t){const{isConfirmed:o}=await i.confirm("Deseja confirmar a exclusão?");if(!o)return;i.loading("processando...");const c=route("convenios.destroy",t.id);this.$inertia.visit(c,{method:"delete",data:t,preserveScroll:!0,preserveState:!0,onSuccess:()=>{i.toastr("Removido com sucesso",t.numero,"success")},onError:_=>{for(let[r,l]of Object.entries(_))i.toastr(l,r,"error")},onFinish:()=>{i.close()}})},async limpaPesquisa(){this.formFiltro={numero:"",virgencia:"",virgenciaPrestacaoContas:"",contratoId:"",orgaoId:""},this.$inertia.visit(route("convenios.index"))},closeModal(){this.confirmingUserDeletion=!1,this.form.reset()}}},J={class:"container-fluid p-0"},K=e("h1",{class:"h3 mb-3"},"Convênios",-1),Q={class:"row"},W={class:"col-xl-12"},X={class:"card"},Y={class:"card-header pb-0"},Z=M('<div class="-actions float-end"><div class="dropdown position-relative"><a href="#" data-bs-toggle="dropdown" data-bs-display="static"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal align-middle"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg></a><div class="dropdown-menu dropdown-menu-end"><a class="dropdown-item" href="#">Action</a><a class="dropdown-item" href="#">Another action</a><a class="dropdown-item" href="#">Something else here</a></div></div></div>',1),$={class:"row"},ee={class:"col-2 mb-3"},te=e("label",{for:"virgencia"},"Virgência",-1),oe={class:"col-2 mb-3"},se=e("label",{for:"virgenciaPrestacaoContas"},"Virgência",-1),re={class:"col-2 mb-3"},ae=e("label",{for:"numero"},"Nº Convênio",-1),ne={class:"col-2 mb-3"},le=e("label",{for:"numero_processo"},"Nº Processo",-1),ie={class:"col-3 mb-3"},ce=e("label",{for:"orgao_id"},"Orgão: ",-1),de=e("option",{value:"0",selected:""},"-Selecione-",-1),me=["value","selected"],ue={class:"ms-auto text-end mt-n1"},_e={class:"row no-print"},he={class:"col-12"},pe=["disabled"],ve={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},fe={key:1,class:"fa-solid fa-magnifying-glass"},ge={key:2},be={key:3},xe=e("i",{class:"fa-solid fa-eraser"},null,-1),ye={class:"card-body"},Fe={class:"table table-responsive table-striped table-hover","aria-describedby":"listaConvenio"},ke=e("thead",null,[e("tr",null,[e("th",{class:"d-none d-md-table-cell text-center"},"Nº Processo "),e("th",{class:"d-none d-md-table-cell text-center"},"Nº Convênio"),e("th",null,"Objeto"),e("th",{class:"d-none d-md-table-cell text-center"},"Valor liberado"),e("th",{class:"d-none d-md-table-cell text-center"},"Virgência"),e("th",{class:"d-none d-md-table-cell text-center"},"Prestação de contas"),e("th",null,"Ações")])],-1),we={class:"d-none d-md-table-cell"},Pe={class:"d-none d-md-table-cell text-nowrap"},Ce={class:"d-none d-md-table-cell text-center"},je={class:"d-none d-md-table-cell text-center"},Se={class:"d-none d-md-table-cell text-center"},Ve={class:"text-nowrap"},Oe=e("i",{class:"fas fa-edit fa-1x"},null,-1),Be=[Oe],Ie=["onClick"],Le=e("i",{class:"fas fa-trash fa-1x"},null,-1),Me=[Le],Ne={key:0},Ee={colspan:"6"};function De(t,o,c,_,r,l){const h=x("FlashMessage"),m=x("Pagination");return a(),n("div",J,[u(e("div",null,[k(h)],512),[[B,t.$page.props.flash.message]]),K,e("div",Q,[e("div",W,[e("div",X,[e("div",Y,[Z,e("form",{autocomplete:"on",novalidate:"",class:"mb-3",onSubmit:o[6]||(o[6]=I(s=>l.buscar(),["prevent"]))},[e("div",$,[e("div",ee,[te,u(e("input",{type:"date",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=s=>r.formFiltro.virgencia=s)},null,512),[[v,r.formFiltro.virgencia]])]),e("div",oe,[se,u(e("input",{type:"date",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=s=>r.formFiltro.virgenciaPrestacaoContas=s)},null,512),[[v,r.formFiltro.virgenciaPrestacaoContas]])]),e("div",re,[ae,u(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[2]||(o[2]=s=>r.formFiltro.numero=s)},null,512),[[v,r.formFiltro.numero]])]),e("div",ne,[le,u(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[3]||(o[3]=s=>r.formFiltro.numero_processo=s)},null,512),[[v,r.formFiltro.numero_processo]])]),e("div",ie,[ce,u(e("select",{class:"form-control","onUpdate:modelValue":o[4]||(o[4]=s=>r.formFiltro.orgaoId=s)},[de,(a(!0),n(y,null,F(r.orgaos,(s,g)=>(a(),n("option",{key:g,value:s.id,selected:r.formFiltro.orgaoId===s.id},d(s.nome),9,me))),128))],512),[[L,r.formFiltro.orgaoId]])])]),e("div",ue,[e("div",_e,[e("div",he,[e("button",{type:"submit",class:"btn btn-primary btns-no-actions m-1",disabled:r.enviandoForm},[r.enviandoForm?(a(),n("span",ve)):(a(),n("i",fe)),r.enviandoForm?(a(),n("span",be," Pesquisando... ")):(a(),n("span",ge," Pesquisar "))],8,pe),l.temFiltro?(a(),n("button",{key:0,type:"button",class:"btn btn-secondary btns-no-actions m-0",onClick:o[5]||(o[5]=s=>l.limpaPesquisa())},[xe,p(" Limpar ")])):f("",!0)])])])],32)]),e("div",ye,[e("table",Fe,[ke,e("tbody",null,[(a(!0),n(y,null,F(c.convenios.data,(s,g)=>(a(),n("tr",{key:g},[e("td",we,d(s.numero),1),e("td",Pe,d(s.numero_processo),1),e("td",null,[p(d(s.objeto)+" ",1),e("p",null,[e("small",null,d(s.orgao.nome),1)])]),e("td",Ce,d(l.formatarMoedaPtBr(s.valor_liberado)),1),e("td",je,d(l.formatarDataPtBr(s.virgencia)),1),e("td",Se,d(l.formatarDataPtBr(s.virgencia_prestacao_contas)),1),e("td",Ve,[e("a",{href:"javascript:void(0);",onClick:o[7]||(o[7]=j=>t.notyf()),class:"btn btn-sm btn-info","data-toggle":"tooltip","data-placement":"top",title:"Excluir","data-original-title":"Excluir"},Be),e("a",{href:"javascript:void(0);",onClick:j=>l.deletar(s),"data-toggle":"tooltip","data-placement":"top",title:"Excluir","data-original-title":"Excluir",class:"btn btn-sm btn-danger"},Me,8,Ie)])]))),128))]),l.ocultarPaginacao?f("",!0):(a(),n("tfoot",Ne,[e("tr",null,[e("td",Ee,[e("div",null,[k(m,{data:c.convenios},null,8,["data"])])])])]))])])])])])])}const ze=C(G,[["render",De]]);export{ze as default};
//# sourceMappingURL=Index-fcad3f8d.js.map
